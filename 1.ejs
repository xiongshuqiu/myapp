<button
  type="button"
  class="btn btn-primary"
  data-toggle="modal"
  data-target="#updatePasswordModal"
  data-user-id="<%= user._id %>"   // 确保从服务器段渲染出来的值
>
  Update Password
</button>


 <!-- 模态框 -->
 <div
 class="modal fade"
 id="updatePasswordModal"
 tabindex="-1"
 role="dialog"
 aria-labelledby="updatePasswordModalLabel"
 aria-hidden="true"
>
 <div class="modal-dialog">
   <div class="modal-content">
     <div class="modal-header">
       <button
         type="button"
         class="close"
         data-dismiss="modal"
         aria-hidden="true"
       >
         &times;
       </button>
       <h4 class="modal-title" id="updatePasswordModalLabel">
         Update Password
       </h4>
     </div>
     <div class="modal-body">
       <form id="updatePasswordForm">
         <div class="form-group">
           <label for="newPassword">New Password</label>
           <input
             type="password"
             class="form-control"
             id="newPassword"
             required
           />
         </div>
         <div class="form-group">
           <label for="confirmPassword">Confirm Password</label>
           <input
             type="password"
             class="form-control"
             id="confirmPassword"
             required
           />
         </div>
       </form>
     </div>
     <div class="modal-footer">
       <button type="button" class="btn btn-default" data-dismiss="modal">
         Close
       </button>
       <button
         type="button"
         class="btn btn-primary"
         id="savePasswordButton"
       >
         Save changes
       </button>
     </div>
   </div>
 </div>
</div>


<sript>
// 等待DOM内容加载完成后执行
document.addEventListener('DOMContentLoaded', function () { 
    // 获取“保存密码”按钮元素
    const savePasswordButton = document.getElementById('savePasswordButton'); 
    // 获取更新密码的模态框元素
    const updatePasswordModal = document.getElementById('updatePasswordModal'); 

    // 当模态框显示时触发
    $('#updatePasswordModal').on('show.bs.modal', function (event) { 
        // 获取触发事件的按钮
        const button = $(event.relatedTarget); 
        // 从按钮的数据属性中获取userId
        const userId = button.data('userId'); 
        // 获取模态框元素
        const modal = $(this); 
        // 将userId设置到模态框的data属性中
        modal.attr('data-user-id', userId); 
    }); 

    // 当“保存密码”按钮被点击时触发
    savePasswordButton.addEventListener('click', async function () { 
        // 获取模态框中设置的用户ID
        const userId = updatePasswordModal.getAttribute('data-user-id'); 
        // 获取新密码的值
        const newPassword = document.getElementById('newPassword').value; 
        // 获取确认密码的值
        const confirmPassword = document.getElementById('confirmPassword').value; 

        // 检查新密码和确认密码是否匹配
        if (newPassword !== confirmPassword) { 
            // 如果不匹配，弹出提示框
            alert('Passwords do not match!'); 
            return; 
        } 

        // 创建包含新密码的数据对象
        const data = { password: newPassword }; 

        try { 
            // 向服务器发送POST请求，更新密码
            const response = await fetch(`/api/accounts/${userId}/password
          </sript>