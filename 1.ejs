// 1.获取所有床位分配
const getAllBedAssignments = async (req, res) => {
  const _id = req.user._id;
  const role = req.user.role;
  console.log('User data:', { _id, role }); // 调试信息
  const apiUrl = `${process.env.API_URL}/api/beds/assignment/?_id=${_id}&role=${role}`;
  console.log('API URL:', apiUrl); // 调试信息
  
  try {
    const response = await getRequest(apiUrl);
    const bedAssignments = response.data;
    if (response.success) {
      res.render('bed/bedAssignment/bedAssignmentManagement', {
        activePage: 'bed-management',
        bedAssignments,
        navItems: req.navItems, // 将导航项传递到视图
        buttonItems: req.buttonItems,
        linkItems: req.linkItems,
      });
    }
  } catch (err) {
    handleError(err, req, res);
  }
};
